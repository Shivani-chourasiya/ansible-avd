# yaml-language-server: $schema=../../../../plugins/plugin_utils/schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  router_bgp:
    type: dict
    keys:
      as:
        type: str
        convert_types:
          - int
      router_id:
        type: str
      distance:
        type: dict
        keys:
          external_routes:
            type: int
            convert_types:
              - str
            min: 1
            max: 255
          internal_routes:
            type: int
            convert_types:
              - str
            min: 1
            max: 255
          local_routes:
            type: int
            convert_types:
              - str
            min: 1
            max: 255
      maximum_paths:
        type: dict
        keys:
          paths:
            type: int
            convert_types:
              - str
            min: 1
            max: 600
          ecmp:
            type: int
            convert_types:
              - str
            min: 1
            max: 600
      updates:
        type: dict
        keys:
          wait_for_convergence:
            type: bool
          wait_install:
            type: bool
      bgp_cluster_id:
        type: str
      bgp_defaults:
        type: list
        items:
          type: str
      bgp:
        type: dict
        keys:
          bestpath:
            type: dict
            keys:
              d_path:
                type: bool
      listen_ranges:
        type: list
        description: |
          New improved "listen_ranges" data model to support multiple listen ranges and additional filter capabilities
        items:
          type: dict
          keys:
            prefix:
              type: str
              description: Key only used for documentation or validation purposes
            peer_id_include_router_id:
              type: bool
              description: Include router ID as part of peer filter
            peer_group:
              type: str
            peer_filter:
              type: str
              description: |
                peer_filter or remote_as is required but mutually exclusive.
                If both are defined, peer_filter takes precedence
            remote_as:
              type: str
              convert_types:
                - int
              description: Remote ASN in plain or dot notation
      peer_groups:
        type: list
        primary_key: name
        convert_types:
          - dict
        items:
          type: dict
          keys:
            name:
              type: str
            type:
              type: str
              description: Key only used for documentation or validation purposes
            remote_as:
              type: str
              convert_types:
                - int
            local_as:
              type: int
              convert_types:
                - str
            description:
              type: str
            shutdown:
              type: bool
            remove_private_as:
              type: dict
              description: Remove private AS numbers in outbound AS path
              keys:
                enabled:
                  type: bool
                all:
                  type: bool
                replace_as:
                  type: bool
            remove_private_as_ingress:
              type: dict
              keys:
                enabled:
                  type: bool
                replace_as:
                  type: bool
            peer_filter:
              type: str
            next_hop_unchanged:
              type: bool
            update_source:
              type: str
            route_reflector_client:
              type: bool
            bfd:
              type: bool
            ebgp_multihop:
              type: int
              convert_types:
                - str
            next_hop_self:
              type: bool
            password:
              type: str
            default_originate:
              type: dict
              keys:
                enabled:
                  type: bool
                always:
                  type: bool
                route_map:
                  type: str
            send_community:
              type: str
              description: Key only used for documentation or validation purposes
            maximum_routes:
              type: int
              convert_types:
                - str
            maximum_routes_warning_limit:
              type: str
              convert_types:
                - int
              description: Key only used for documentation or validation purposes
            maximum_routes_warning_only:
              type: bool
            link_bandwidth:
              type: dict
              keys:
                enabled:
                  type: bool
                default:
                  type: str
                  description: nn.nn(K|M|G) Link speed in bits/second
            allowas_in:
              type: dict
              keys:
                enabled:
                  type: bool
                times:
                  type: int
                  convert_types:
                    - str
                  min: 1
                  max: 10
            weight:
              type: int
              convert_types:
                - str
            timers:
              type: str
              description: Keep alive hold timer values
            rib_in_pre_policy_retain:
              type: dict
              keys:
                enabled:
                  type: bool
                all:
                  type: bool
            route_map_in:
              type: str
              description: Inbound Route-Map
            route_map_out:
              type: str
              description: Outbound Route-Map
            bgp_listen_range_prefix:
              type: str
              description: IP Prefix Range
            struct_cfg:
              type: dict
              description: Key only used for documentation or validation purposes
              keys:
                description:
                  type: str
            set_ipv4_next_hop:
              type: str
      neighbors:
        type: list
        primary_key: ip_address
        convert_types:
          - dict
        items:
          type: dict
          keys:
            ip_address:
              type: str
            peer_group:
              type: str
            remote_as:
              type: str
              convert_types:
                - int
            local_as:
              type: int
              convert_types:
                - str
            description:
              type: str
            shutdown:
              type: bool
            update_source:
              type: str
            bfd:
              type: bool
            weight:
              type: int
              convert_types:
                - str
            timers:
              type: str
              description: Keep alive hold timer values
            route_map_in:
              type: str
              description: Inbound Route-Map
            route_map_out:
              type: str
              description: Outbound Route-Map
            default_originate:
              type: dict
              keys:
                enabled:
                  type: bool
                always:
                  type: bool
                route_map:
                  type: str
            send_community:
              type: str
              description: Key only used for documentation or validation purposes
            maximum_routes:
              type: int
              convert_types:
                - str
            maximum_routes_warning_limit:
              type: str
              convert_types:
                - int
              description: Key only used for documentation or validation purposes
            maximum_routes_warning_only:
              type: bool
            allowas_in:
              type: dict
              keys:
                enabled:
                  type: bool
                times:
                  type: int
                  convert_types:
                    - str
                  min: 1
                  max: 10
            ebgp_multihop:
              type: int
              convert_types:
                - str
            next_hop_self:
              type: bool
            link_bandwidth:
              type: dict
              keys:
                enabled:
                  type: bool
                default:
                  type: str
                  description: Link speed in bits/second
            rib_in_pre_policy_retain:
              type: dict
              keys:
                enabled:
                  type: bool
                all:
                  type: bool
            remove_private_as:
              type: dict
              description: Remove private AS numbers in outbound AS path
              keys:
                enabled:
                  type: bool
                all:
                  type: bool
                replace_as:
                  type: bool
            remove_private_as_ingress:
              type: dict
              keys:
                enabled:
                  type: bool
                replace_as:
                  type: bool
      neighbor_interfaces:
        type: list
        primary_key: name
        convert_types:
          - dict
        items:
          type: dict
          keys:
            name:
              type: str
            remote_as:
              type: str
              convert_types:
                - int
            peer_group:
              type: str
            description:
              type: str
            peer_filter:
              type: str
      aggregate_addresses:
        type: list
        primary_key: prefix
        convert_types:
          - dict
        items:
          type: dict
          keys:
            prefix:
              type: str
              description: Aggregate Address/Mask
            advertise_only:
              type: bool
            as_set:
              type: bool
            summary_only:
              type: bool
            attribute_map:
              type: str
            match_map:
              type: str
      redistribute_routes:
        type: list
        primary_key: source_protocol
        convert_types:
          - dict
          - list
        items:
          type: dict
          keys:
            source_protocol:
              type: str
            route_map:
              type: str
      vlan_aware_bundles:
        type: list
        primary_key: name
        convert_types:
          - dict
        items:
          type: dict
          keys:
            name:
              type: str
            tenant:
              type: str
            description:
              type: str
            rd:
              type: str
            rd_evpn_domain:
              type: dict
              keys:
                domain:
                  type: str
                  valid_values: ["remote", "all"]
                rd:
                  type: str
            route_targets:
              type: dict
              keys:
                both:
                  type: list
                  items:
                    type: str
                import:
                  type: list
                  items:
                    type: str
                export:
                  type: list
                  items:
                    type: str
                import_evpn_domains:
                  type: list
                  items:
                    type: dict
                    keys:
                      domain:
                        type: str
                        valid_values: ["remote", "all"]
                      route_target:
                        type: str
                export_evpn_domains:
                  type: list
                  items:
                    type: dict
                    keys:
                      domain:
                        type: str
                        valid_values: ["remote", "all"]
                      route_target:
                        type: str
                import_export_evpn_domains:
                  type: list
                  items:
                    type: dict
                    keys:
                      domain:
                        type: str
                        valid_values: ["remote", "all"]
                      route_target:
                        type: str
            redistribute_routes:
              type: list
              items:
                type: str
            no_redistribute_routes:
              type: list
              items:
                type: str
            vlan:
              type: str
              convert_types:
                - int
      vlans:
        type: list
        primary_key: id
        convert_types:
          - dict
        items:
          type: dict
          keys:
            id:
              type: int
              convert_types:
                - str
            tenant:
              type: str
              description: Key only used for documentation or validation purposes
            rd:
              type: str
            rd_evpn_domain:
              type: dict
              keys:
                domain:
                  type: str
                  valid_values: ["remote", "all"]
                rd:
                  type: str
            eos_cli:
              type: str
              description: Key only used for documentation or validation purposes
            struct_cfg:
              type: dict
              description: Key only used for documentation or validation purposes
              keys:
                redistribute_routes:
                  type: list
                  items:
                    type: str
            route_targets:
              type: dict
              keys:
                both:
                  type: list
                  items:
                    type: str
                import:
                  type: list
                  items:
                    type: str
                export:
                  type: list
                  items:
                    type: str
                import_evpn_domains:
                  type: list
                  items:
                    type: dict
                    keys:
                      domain:
                        type: str
                        valid_values: ["remote", "all"]
                      route_target:
                        type: str
                export_evpn_domains:
                  type: list
                  items:
                    type: dict
                    keys:
                      domain:
                        type: str
                        valid_values: ["remote", "all"]
                      route_target:
                        type: str
                import_export_evpn_domains:
                  type: list
                  items:
                    type: dict
                    keys:
                      domain:
                        type: str
                        valid_values: ["remote", "all"]
                      route_target:
                        type: str
            redistribute_routes:
              type: list
              items:
                type: str
            no_redistribute_routes:
              type: list
              items:
                type: str
      vpws:
        type: list
        primary_key: name
        convert_types:
          - dict
        items:
          type: dict
          keys:
            name:
              type: str
            rd:
              type: str
            route_targets:
              type: dict
              keys:
                import_export:
                  type: str
            mpls_control_word:
              type: bool
              default: false
            label_flow:
              type: bool
              default: false
            mtu:
              type: int
              convert_types:
                - str
            pseudowires:
              type: list
              primary_key: name
              convert_types:
                - dict
              items:
                type: dict
                keys:
                  name:
                    type: str
                  id_local:
                    type: int
                    convert_types:
                      - str
                    description: Must match id_remote on other pe
                  id_remote:
                    type: int
                    convert_types:
                      - str
                    description: Must match id_local on other pe
      address_family_evpn:
        type: dict
        keys:
          domain_identifier:
            type: str
            convert_types:
              - int
          neighbor_default:
            type: dict
            keys:
              encapsulation:
                type: str
                valid_values: ["vxlan", "mpls"]
              next_hop_self_source_interface:
                type: str
              next_hop_self_received_evpn_routes:
                type: dict
                keys:
                  enable:
                    type: bool
                  inter_domain:
                    type: bool
          peer_groups:
            type: list
            primary_key: name
            convert_types:
              - dict
            items:
              type: dict
              keys:
                name:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
                domain_remote:
                  type: bool
          evpn_hostflap_detection:
            type: dict
            keys:
              enabled:
                type: bool
              window:
                type: int
                convert_types:
                  - str
                description: Time in seconds
              threshold:
                type: int
                convert_types:
                  - str
                description: Minimum number of MAC moves that indicate a MAC Duplication issue
              expiry_timeout:
                type: int
                convert_types:
                  - str
                description: Timeout in seconds
          route:
            type: dict
            keys:
              import_match_failure_action:
                type: str
                description: |
                  Example: "discard"
      address_family_rtc:
        type: dict
        keys:
          peer_groups:
            type: list
            primary_key: name
            convert_types:
              - dict
            items:
              type: dict
              keys:
                name:
                  type: str
                activate:
                  type: bool
                default_route_target:
                  type: dict
                  keys:
                    only:
                      type: bool
                    encoding_origin_as_omit:
                      type: str
      address_family_ipv4:
        type: dict
        keys:
          networks:
            type: list
            primary_key: prefix
            convert_types:
              - dict
            items:
              type: dict
              keys:
                prefix:
                  type: str
                route_map:
                  type: str
          peer_groups:
            type: list
            primary_key: name
            convert_types:
              - dict
            items:
              type: dict
              keys:
                name:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
                default_originate:
                  type: dict
                  keys:
                    always:
                      type: bool
                    route_map:
                      type: str
                next_hop:
                  type: dict
                  keys:
                    address_family_ipv6_originate:
                      type: bool
                prefix_list_in:
                  type: str
                  description: Prefix List Name
                prefix_list_out:
                  type: str
                  description: Prefix List Name
          neighbors:
            type: list
            primary_key: ip_address
            convert_types:
              - dict
            items:
              type: dict
              keys:
                ip_address:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
                prefix_list_in:
                  type: str
                  description: Prefix List Name
                prefix_list_out:
                  type: str
                  description: Prefix List Name
                default_originate:
                  type: dict
                  keys:
                    always:
                      type: bool
                    route_map:
                      type: str
      address_family_ipv4_multicast:
        type: dict
        keys:
          peer_groups:
            type: list
            primary_key: name
            convert_types:
              - dict
            items:
              type: dict
              keys:
                name:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
          neighbors:
            type: list
            primary_key: ip_address
            convert_types:
              - dict
            items:
              type: dict
              keys:
                ip_address:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
          redistribute_routes:
            type: list
            primary_key: source_protocol
            convert_types:
              - dict
            items:
              type: dict
              keys:
                source_protocol:
                  type: str
                route_map:
                  type: str
      address_family_ipv6:
        type: dict
        keys:
          networks:
            type: list
            primary_key: prefix
            convert_types:
              - dict
            items:
              type: dict
              keys:
                prefix:
                  type: str
                route_map:
                  type: str
          peer_groups:
            type: list
            primary_key: name
            convert_types:
              - dict
            items:
              type: dict
              keys:
                name:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
                prefix_list_in:
                  type: str
                  description: Prefix List Name
                prefix_list_out:
                  type: str
                  description: Prefix List Name
          neighbors:
            type: list
            primary_key: ip_address
            convert_types:
              - dict
            items:
              type: dict
              keys:
                ip_address:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
                prefix_list_in:
                  type: str
                  description: Prefix List Name
                prefix_list_out:
                  type: str
                  description: Prefix List Name
          redistribute_routes:
            type: list
            primary_key: source_protocol
            convert_types:
              - dict
            items:
              type: dict
              keys:
                source_protocol:
                  type: str
                route_map:
                  type: str
      address_family_vpn_ipv4:
        type: dict
        keys:
          domain_identifier:
            type: str
            convert_types:
              - int
          peer_groups:
            type: list
            primary_key: name
            convert_types:
              - dict
            items:
              type: dict
              keys:
                name:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
          route:
            type: dict
            keys:
              import_match_failure_action:
                type: str
                description: |
                  Example: "discard"
          neighbors:
            type: list
            primary_key: ip_address
            convert_types:
              - dict
            items:
              type: dict
              keys:
                ip_address:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
          neighbor_default_encapsulation_mpls_next_hop_self:
            type: dict
            keys:
              source_interface:
                type: str
      address_family_vpn_ipv6:
        type: dict
        keys:
          domain_identifier:
            type: str
            convert_types:
              - int
          peer_groups:
            type: list
            primary_key: name
            convert_types:
              - dict
            items:
              type: dict
              keys:
                name:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
          route:
            type: dict
            keys:
              import_match_failure_action:
                type: str
                description: |
                  Example: "discard"
          neighbors:
            type: list
            primary_key: ip_address
            convert_types:
              - dict
            items:
              type: dict
              keys:
                ip_address:
                  type: str
                activate:
                  type: bool
                route_map_in:
                  type: str
                  description: Route-Map Name
                route_map_out:
                  type: str
                  description: Route-Map Name
          neighbor_default_encapsulation_mpls_next_hop_self:
            type: dict
            keys:
              source_interface:
                type: str
      vrfs:
        type: list
        primary_key: name
        convert_types:
          - dict
        items:
          type: dict
          keys:
            name:
              type: str
            rd:
              type: str
            evpn_multicast:
              type: bool
            route_targets:
              type: dict
              keys:
                import:
                  type: list
                  primary_key: address_family
                  secondary_key: route_targets
                  convert_types:
                    - dict
                  items:
                    type: dict
                    keys:
                      address_family:
                        type: str
                      route_targets:
                        type: list
                        items:
                          type: str
                export:
                  type: list
                  primary_key: address_family
                  secondary_key: route_targets
                  convert_types:
                    - dict
                  items:
                    type: dict
                    keys:
                      address_family:
                        type: str
                      route_targets:
                        type: list
                        items:
                          type: str
            router_id:
              type: str
            timers:
              type: str
              description: Keep alive hold timer values
            networks:
              type: list
              primary_key: prefix
              convert_types:
                - dict
              items:
                type: dict
                keys:
                  prefix:
                    type: str
                  route_map:
                    type: str
            listen_ranges:
              type: list
              description: |
                New improved "listen_ranges" data model to support multiple listen ranges and additional filter capabilities
              items:
                type: dict
                keys:
                  prefix:
                    type: str
                    description: Key only used for documentation or validation purposes
                  peer_id_include_router_id:
                    type: bool
                    description: Include router ID as part of peer filter
                  peer_group:
                    type: str
                  peer_filter:
                    type: str
                    description: |
                      peer_filter or remote_as is required but mutually exclusive.
                      If both are defined, peer_filter takes precedence
                  remote_as:
                    type: str
                    convert_types:
                      - int
                    description: Remote ASN in plain or dot notation
            redistribute_routes:
              type: list
              primary_key: source_protocol
              convert_types:
                - dict
                - list
              items:
                type: dict
                keys:
                  source_protocol:
                    type: str
                  route_map:
                    type: str
            aggregate_addresses:
              type: list
              primary_key: prefix
              convert_types:
                - dict
              items:
                type: dict
                keys:
                  prefix:
                    type: str
                    description: Aggregate Address/Mask
                  advertise_only:
                    type: bool
                  as_set:
                    type: bool
                  summary_only:
                    type: bool
                  attribute_map:
                    type: str
                  match_map:
                    type: str
            neighbor_interfaces:
              type: list
              primary_key: name
              convert_types:
                - dict
              items:
                type: dict
                keys:
                  name:
                    type: str
                  remote_as:
                    type: str
                    convert_types:
                      - int
                  peer_group:
                    type: str
                  peer_filter:
                    type: str
                  description:
                    type: str
            address_families:
              type: list
              primary_key: address_family
              convert_types:
                - dict
              items:
                type: dict
                keys:
                  address_family:
                    type: str
                  bgp:
                    type: dict
                    keys:
                      missing_policy:
                        type: dict
                        keys:
                          direction_in_action:
                            type: str
                            valid_values: ["deny", "deny-in-out", "permit"]
                          direction_out_action:
                            type: str
                            valid_values: ["deny", "deny-in-out", "permit"]
                      additional_paths:
                        type: list
                        items:
                          type: str
                  neighbors:
                    type: list
                    primary_key: ip_address
                    convert_types:
                      - dict
                    items:
                      type: dict
                      keys:
                        ip_address:
                          type: str
                        activate:
                          type: bool
                        route_map_in:
                          type: str
                          description: Route-Map Name
                        route_map_out:
                          type: str
                          description: Route-Map Name
                  peer_groups:
                    type: list
                    primary_key: name
                    convert_types:
                      - dict
                    items:
                      type: dict
                      keys:
                        name:
                          type: str
                        activate:
                          type: bool
                        next_hop:
                          type: dict
                          keys:
                            address_family_ipv6_originate:
                              type: bool
                  networks:
                    type: list
                    primary_key: prefix
                    convert_types:
                      - dict
                    items:
                      type: dict
                      keys:
                        prefix:
                          type: str
                        route_map:
                          type: str
            eos_cli:
              type: str
              description: |
                Multiline EOS CLI rendered directly on the Router BGP, VRF definition in the final EOS configuration
            neighbors:
              type: list
              primary_key: ip_address
              convert_types:
                - dict
              items:
                type: dict
                keys:
                  ip_address:
                    type: str
                  peer_group:
                    type: str
                  remote_as:
                    type: str
                    convert_types:
                      - int
                  password:
                    type: str
                  local_as:
                    type: int
                    convert_types:
                      - str
                  description:
                    type: str
                  shutdown:
                    type: bool
                  update_source:
                    type: str
                  bfd:
                    type: bool
                  weight:
                    type: int
                    convert_types:
                      - str
                  timers:
                    type: str
                    description: Keep alive hold timer values
                  route_map_in:
                    type: str
                    description: Inbound Route-Map
                  route_map_out:
                    type: str
                    description: Outbound Route-Map
                  default_originate:
                    type: dict
                    keys:
                      enabled:
                        type: bool
                      always:
                        type: bool
                      route_map:
                        type: str
                  send_community:
                    type: str
                    description: Key only used for documentation or validation purposes
                  maximum_routes:
                    type: int
                    convert_types:
                      - str
                  maximum_routes_warning_limit:
                    type: str
                    convert_types:
                      - int
                    description: Key only used for documentation or validation purposes
                  maximum_routes_warning_only:
                    type: bool
                  allowas_in:
                    type: dict
                    keys:
                      enabled:
                        type: bool
                      times:
                        type: int
                        convert_types:
                          - str
                        min: 1
                        max: 10
                  ebgp_multihop:
                    type: int
                    convert_types:
                      - str
                  next_hop_self:
                    type: bool
                  prefix_list_in:
                    type: str
                    description: Prefix List Name
                  prefix_list_out:
                    type: str
                    description: Prefix List Name
                  rib_in_pre_policy_retain:
                    type: dict
                    keys:
                      enabled:
                        type: bool
                      all:
                        type: bool
                  remove_private_as:
                    type: dict
                    description: Remove private AS numbers in outbound AS path
                    keys:
                      enabled:
                        type: bool
                      all:
                        type: bool
                      replace_as:
                        type: bool
                      ingress:
                        type: bool
                  remove_private_as_ingress:
                    type: dict
                    keys:
                      enabled:
                        type: bool
                      replace_as:
                        type: bool
                  address_families:
                    type: list
                    description: Key only used for documentation or validation purposes
                    primary_key: address_family
                    convert_types:
                      - dict
                    items:
                      type: dict
                      keys:
                        address_family:
                          type: str
                        bgp:
                          type: dict
                          keys:
                            missing_policy:
                              type: dict
                              keys:
                                direction_in_action:
                                  type: str
                                  valid_values: [ "deny", "deny-in-out", "permit" ]
                                direction_out_action:
                                  type: str
                                  valid_values: [ "deny", "deny-in-out", "permit" ]
                            additional_paths:
                              type: list
                              items:
                                type: str
                        activate:
                          type: bool
